<!doctype html>

<html>
  <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/handlebars.js/2.0.0-alpha.1/handlebars.min.js"></script>
  <script>
    $(function(){
      $.ajax({
        url: 'https://api.spotify.com/v1/me',
        headers: {
          'Authorization' : 'Bearer ' + localStorage.getItem('access_token')
        },
        success: function(response) {
          var userProfileTemplate = Handlebars.compile($('#user-profile-template').html());
          response.display_name = response.display_name.split(' ')[0];
          $('header').html(userProfileTemplate(response))
          $('#logout-button').click(function(){
            localStorage.clear();
            window.location = 'http://spotinfinity.azurewebsites.net/login.html';
          })
        },
        error: function() {
          localStorage.clear();
          window.location = 'http://spotinfinity.azurewebsites.net/login.html';
        }
      });
      $.ajax({
        //url: 'https://api.spotify.com/v1/audio-features/05KfyCEE6otdlT1pp2VIjP',
        //url: 'https://api.spotify.com/v1/recommendations?seed_tracks=0c6xIDDpzE81m2q797ordA',
        url: 'https://api.spotify.com/v1/search?q=tania&type=track',
        headers: {
          'Authorization' : 'Bearer ' + localStorage.getItem('access_token')
        },
        success: function(response2) {
          console.log(response2)
        }
      })
    });
  </script>

  <head>
    <title>Spotinfinity</title>

    <meta charset="utf-8">
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="author" content="">

    <link rel="stylesheet" href="css/style.css" type="text/css">
  </head>

  <body>
    <header id="header">
    </header> <!-- End #header -->

    <div id="sidebar">
      <div id="search-box">
        <form>
          <input type="text" name="search" placeholder="Search...">
        </form>
      </div>

      <div id="preset-box">
        <ul>
          <li class="preset-btn">Most listened tracks</li>
          <li class="preset-btn">Recent saved tracks</li>

          <li class="preset-btn">Global top 20</li>
          <li class="preset-btn">UK top 20</li>
        </ul>
      </div>

      <div id="playlist-box">
      </div>
    </div>

    <div id='content'>
      <table>
        <tr>
          <th class="tbl-add"></th>
          <th class="tbl-name">Name</th>
          <th class="tbl-artist">Artist</th>
          <th class="tbl-popularity">Popularity</th>
        </tr>

        <tr>
          <td class="tbl-add">+</td>
          <td class="tbl-name">song</td>
          <td class="tbl-artist">singer</td>
          <td class="tbl-popularity">very</td>
        </tr>

        <tr>
          <td class="tbl-add">+</td>
          <td class="tbl-name">song</td>
          <td class="tbl-artist">singer</td>
          <td class="tbl-popularity">very</td>
        </tr>

        <tr>
          <td class="tbl-add">+</td>
          <td class="tbl-name">song</td>
          <td class="tbl-artist">singer</td>
          <td class="tbl-popularity">very</td>
        </tr>

        <tr>
          <td class="tbl-add">+</td>
          <td class="tbl-name">song</td>
          <td class="tbl-artist">singer</td>
          <td class="tbl-popularity">very</td>
        </tr>

        <tr>
          <td class="tbl-add">+</td>
          <td class="tbl-name">song</td>
          <td class="tbl-artist">singer</td>
          <td class="tbl-popularity">very</td>
        </tr>

        <tr>
          <td class="tbl-add">+</td>
          <td class="tbl-name">song</td>
          <td class="tbl-artist">singer</td>
          <td class="tbl-popularity">very</td>
        </tr>

        <tr>
          <td class="tbl-add">+</td>
          <td class="tbl-name">song</td>
          <td class="tbl-artist">singer</td>
          <td class="tbl-popularity">very</td>
        </tr>

        <tr>
          <td class="tbl-add">+</td>
          <td class="tbl-name">song</td>
          <td class="tbl-artist">singer</td>
          <td class="tbl-popularity">very</td>
        </tr>

        <tr>
          <td class="tbl-add">+</td>
          <td class="tbl-name">song</td>
          <td class="tbl-artist">singer</td>
          <td class="tbl-popularity">very</td>
        </tr>

        <tr>
          <td class="tbl-add">+</td>
          <td class="tbl-name">song</td>
          <td class="tbl-artist">singer</td>
          <td class="tbl-popularity">very</td>
        </tr>

        <tr>
          <td class="tbl-add">+</td>
          <td class="tbl-name">song</td>
          <td class="tbl-artist">singer</td>
          <td class="tbl-popularity">very</td>
        </tr>

        <tr>
          <td class="tbl-add">+</td>
          <td class="tbl-name">song</td>
          <td class="tbl-artist">singer</td>
          <td class="tbl-popularity">very</td>
        </tr>

        <tr>
          <td class="tbl-add">+</td>
          <td class="tbl-name">song</td>
          <td class="tbl-artist">singer</td>
          <td class="tbl-popularity">very</td>
        </tr>

        <tr>
          <td class="tbl-add">+</td>
          <td class="tbl-name">song</td>
          <td class="tbl-artist">singer</td>
          <td class="tbl-popularity">very</td>
        </tr>

        <tr>
          <td class="tbl-add">+</td>
          <td class="tbl-name">song</td>
          <td class="tbl-artist">singer</td>
          <td class="tbl-popularity">very</td>
        </tr>

        <tr>
          <td class="tbl-add">+</td>
          <td class="tbl-name">song</td>
          <td class="tbl-artist">singer</td>
          <td class="tbl-popularity">very</td>
        </tr>

        <tr>
          <td class="tbl-add">+</td>
          <td class="tbl-name">song</td>
          <td class="tbl-artist">singer</td>
          <td class="tbl-popularity">very</td>
        </tr>

        <tr>
          <td class="tbl-add">+</td>
          <td class="tbl-name">song</td>
          <td class="tbl-artist">singer</td>
          <td class="tbl-popularity">very</td>
        </tr>

        <tr>
          <td class="tbl-add">+</td>
          <td class="tbl-name">song</td>
          <td class="tbl-artist">singer</td>
          <td class="tbl-popularity">very</td>
        </tr>

        <tr>
          <td class="tbl-add">+</td>
          <td class="tbl-name">song</td>
          <td class="tbl-artist">singer</td>
          <td class="tbl-popularity">very</td>
        </tr>
      </table>
    </div>

    <footer id="footer">
      <section id="getInTouch">
          <a>Get In Touch!</a><br>
          <a>info@spotinfinity.co.uk</a><br>
          <a>01224642266</a><br><br>
          <a>123 Music Mound</a><br>
          <a>Aberdeen</a><br>
          <a>AB24 4CH</a>
      </section>
      <section id="aboutUs"></section>
      <span id='user-msg'></span>
    </footer> <!-- End #footer -->
  </body>

  <script id='user-profile-template' type='text/x-handlebars-template'>
    <img id='user-img' src='{{images.0.url}}' />
    <span id='user-msg'>Hello, {{display_name}}</span>
    <button id='logout-button'>Log out</button>
  </script>
</html>
